generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// npx prisma db pull
// npx prisma db push
// npx prisma studio

// heroku config:get DATABASE_URL -a damamyamamy-db
// heroku pg:info --app damamyamamy-db

model orders {
  order_id         Int       @id @default(autoincrement())
  user_id          Int
  order_items      Json
  shipping_address Json      @db.Json
  payment_method   String    @db.VarChar
  payment_result   Json?     @db.Json
  items_price      Decimal   @db.Decimal(12, 2)
  shipping_price   Decimal   @db.Decimal(12, 2)
  tax_price        Decimal   @db.Decimal(12, 2)
  total_price      Decimal   @db.Decimal(12, 2)
  is_paid          Boolean?  @default(false)
  is_delivered     Boolean?  @default(false)
  paid_at          DateTime? @db.Timestamp(6)
  delivered_at     DateTime? @db.Timestamp(6)
  created_at       DateTime? @default(now()) @db.Timestamp(6)
  users            users     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model products {
  id               Int       @id @default(autoincrement())
  name             String    @db.VarChar
  slug             String    @unique @db.VarChar
  categories       String[]
  tags             String[]
  images           Json?
  price            Decimal?  @db.Decimal(12, 2)
  brand            String?   @db.VarChar
  count_in_stock   Int?
  description      String?   @db.VarChar(255)
  infos            String?   @db.VarChar(255)
  condition        String    @db.VarChar
  related_products Int[]
  created_at       DateTime? @default(now()) @db.Timestamp(6)
}

model users {
  id              Int       @id @default(autoincrement())
  name            String    @db.VarChar
  email           String    @unique @db.VarChar(255)
  password        String    @db.VarChar(255)
  is_admin        Boolean?  @default(false)
  profile_pic_url String?   @db.VarChar(255)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  orders          orders[]
}

