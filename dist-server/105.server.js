exports.id=105,exports.ids=[105],exports.modules={902:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(6689),i=r(4661),o=r(997);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c="normal";function s(e){var t,r,s=e.page,l=e.text,u=e.type,d=e.fn,f=e.style,m=(t=(0,n.useState)(c),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){c=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw i}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],h=m[1],v=function(){h("hovered")},y=function(){h(c)},x=function(){"function"==typeof d&&d()};return"function"===u?(0,o.jsx)("button",{type:"button",onClick:function(){return x()},className:"btn ".concat(p," ").concat(f),onMouseEnter:v,onMouseLeave:y,children:l}):"internal"===u?(0,o.jsx)(i.Link,{to:s||"#",onClick:function(){return x()},children:(0,o.jsx)("button",{type:"button",className:"btn ".concat(p," ").concat(f),onMouseEnter:v,onMouseLeave:y,children:l})}):"external"===u?(0,o.jsx)("a",{target:"_blank",href:s||"#",rel:"noopener noreferrer",onClick:function(){return x()},children:(0,o.jsx)("button",{type:"button",className:"btn ".concat(p," ").concat(f),onMouseEnter:v,onMouseLeave:y,children:l})}):"submit"===u?(0,o.jsx)("button",{type:"submit",className:"btn ".concat(p," ").concat(f),onMouseEnter:v,onMouseLeave:y,onClick:function(){return x()},children:l}):void 0}},1105:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var n=r(6689),i=r(4661),o=r(9085),a=r(3998),c=r(902),s=r(997);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r,n,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,c,"next",e)}function c(e){f(o,n,i,a,c,"throw",e)}a(void 0)}))}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){c=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e){var t=e.checkoutToken,r=e.next,i=p((0,n.useState)([]),2),l=i[0],f=i[1],h=p((0,n.useState)(""),2),v=h[0],y=h[1],x=p((0,n.useState)([]),2),j=x[0],b=x[1],g=p((0,n.useState)(""),2),w=g[0],N=g[1],k=p((0,n.useState)([]),2),S=k[0],O=k[1],_=p((0,n.useState)(""),2),C=_[0],E=_[1],A=p((0,n.useState)({}),2),T=A[0],P=A[1],I=p((0,n.useState)({}),2),R=I[0],z=I[1],D=Object.entries(l).map((function(e){var t=p(e,2);return{id:t[0],label:t[1]}})),Z=Object.entries(j).map((function(e){var t=p(e,2);return{id:t[0],label:t[1]}})),q=S.map((function(e){return{id:e.id,label:"".concat(e.description," - (").concat(e.price.formatted_with_symbol,")")}})),M=function(){var e=m(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.B.services.localeListShippingCountries(t);case 3:r=e.sent,n=r.countries,f(n),y(Object.keys(n)[0]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("fetchShippingCountries ERROR!",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=m(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.B.services.localeListSubdivisions(t);case 2:r=e.sent,n=r.subdivisions,b(n),N(Object.keys(n)[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=m(regeneratorRuntime.mark((function e(t,r){var n,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:null,e.next=3,o.B.checkout.getShippingOptions(t,{country:r,region:n});case 3:i=e.sent,O(i),E(i[0].id);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){M(t.id)}),[]),(0,n.useEffect)((function(){v&&V(v)}),[v]),(0,n.useEffect)((function(){w&&B(t.id,v,w)}),[w]),(0,n.useEffect)((function(){T&&console.log("values in useEffect: ",T)}),[T]);var U=function(e){var t=e.target,r=t.name,n=t.value,i=u({},R);if("firstName"===r){var o=(0,a.nameValidation)("nome",n);o?z(u(u({},R),{},d({},r,o))):(delete i[r],z(i))}if("lastName"===r){var c=(0,a.nameValidation)("cognome",n);c?z(u(u({},R),{},d({},r,c))):(delete i[r],z(i))}if("email"===r){var s=(0,a.emailValidation)(n);s?z(u(u({},R),{},d({},r,s))):(delete i[r],z(i))}if("address1"===r||"city"===r){var l=(0,a.requestedValue)(n);l?z(u(u({},R),{},d({},r,l))):(delete i[r],z(i))}if("zip"===r){var f=(0,a.numberValidation)("CAP",n);f?z(u(u({},R),{},d({},r,f))):(delete i[r],z(i))}};return S.length<1?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"loader loader-inverted"}),(0,s.jsx)("p",{children:"in attesa di commerce.js"})]}):(0,s.jsxs)("div",{className:"checkout-form-box",children:[(0,s.jsx)("h3",{className:"",children:"I vostri dati"}),(0,s.jsxs)("form",{onChange:function(e){return function(e){e.preventDefault();var t=e.target.form,r=new FormData(t),n=Object.fromEntries(r.entries());P(n)}(e)},onSubmit:function(e){return function(e){e.preventDefault(),0===Object.keys(R).length?r(T):console.log("INVALID INPUTS")}(e)},children:[(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"Nome *"})}),(0,s.jsxs)("div",{className:"form-col-right",children:[(0,s.jsx)("input",{required:!0,type:"text",name:"firstName",id:"firstName",onBlur:function(e){return U(e)}}),R.firstName&&(0,s.jsx)("div",{className:"form-error",children:R.firstName})]}),(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"Cognome *"})}),(0,s.jsxs)("div",{className:"form-col-right",children:[(0,s.jsx)("input",{required:!0,type:"text",name:"lastName",id:"lastName",onBlur:function(e){return U(e)}}),R.lastName&&(0,s.jsx)("div",{className:"form-error",children:R.lastName})]}),(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"Indirizzo *"})}),(0,s.jsxs)("div",{className:"form-col-right",children:[(0,s.jsx)("input",{required:!0,type:"text",name:"address1",id:"address1",onBlur:function(e){return U(e)}}),R.address1&&(0,s.jsx)("div",{className:"form-error",children:R.address1})]}),(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"Email *"})}),(0,s.jsxs)("div",{className:"form-col-right",children:[(0,s.jsx)("input",{required:!0,type:"text",name:"email",id:"email",onBlur:function(e){return U(e)}}),R.email&&(0,s.jsx)("div",{className:"form-error",children:R.email})]}),(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"CittÃ  *"})}),(0,s.jsxs)("div",{className:"form-col-right",children:[(0,s.jsx)("input",{required:!0,type:"text",name:"city",id:"city",onBlur:function(e){return U(e)}}),R.city&&(0,s.jsx)("div",{className:"form-error",children:R.city})]}),(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"CAP *"})}),(0,s.jsxs)("div",{className:"form-col-right",children:[(0,s.jsx)("input",{required:!0,type:"text",name:"zip",id:"zip",onBlur:function(e){return U(e)}}),R.zip&&(0,s.jsx)("div",{className:"form-error",children:R.zip})]}),(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"Stato"})}),(0,s.jsx)("div",{className:"form-col-right",children:(0,s.jsx)("select",{required:!0,name:"country",id:"country",value:v,onChange:function(e){return y(e.target.value)},children:D.map((function(e){return(0,s.jsx)("option",{value:e.id,children:e.label},e.id)}))})}),(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"Provincia"})}),(0,s.jsx)("div",{className:"form-col-right",children:(0,s.jsx)("select",{required:!0,name:"region",id:"region",value:w,onChange:function(e){return N(e.target.value)},children:Z.map((function(e){return(0,s.jsx)("option",{value:e.id,children:e.label},e.id)}))})}),(0,s.jsx)("div",{className:"form-col-left",children:(0,s.jsx)("label",{children:"Metodo di spedizione"})}),(0,s.jsx)("div",{className:"form-col-right",children:(0,s.jsx)("select",{required:!0,name:"shipping",id:"shipping",value:C,onChange:function(e){return E(e.target.value)},children:q.map((function(e){return(0,s.jsx)("option",{value:e.id,children:e.label},e.id)}))})}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)(c.Z,{page:"/cart",text:"Torna al carrello",type:"internal",style:"inverted-btn"}),(0,s.jsx)(c.Z,{text:"Prosegui",type:"submit",style:"inverted-btn"})]})]})]})}var y=r(4515);function x(e){var t=e.checkoutToken;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Il vostro ordine:"}),(0,s.jsx)("div",{children:t.live.line_items.map((function(e){return(0,s.jsxs)("div",{className:"review-row",children:[(0,s.jsxs)("div",{className:"review-product-infos",children:[(0,s.jsx)("p",{children:e.name}),(0,s.jsxs)("p",{children:["QuantitÃ : ",e.quantity]})]}),(0,s.jsx)("p",{className:"review-product-price",children:e.line_total.formatted_with_symbol})]},e.name)}))}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"review-final-price",children:["Totale: ",t.live.subtotal.formatted_with_symbol]})})]})}function j(e,t,r,n,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,i)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,c,"next",e)}function c(e){j(o,n,i,a,c,"throw",e)}a(void 0)}))}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){c=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var N=(0,r(943).loadStripe)("pk_live_51JSOhbGsnm0Tyvb25feHTQ3DgZgVZJNHgz40u0Hb0MB86rjL6BscsxnVZQVFfyXcbGkQExfZUezbgUih72aVNHQh00sJbvbTSR");function k(e){var t=e.checkoutToken,r=e.shippingData,i=e.nextStep,o=e.backStep,a=e.onCaptureCheckout,l=e.timeout;console.log("shippingData: ",r),console.log("paypal: ",window.paypal);var u=g((0,n.useState)("cc"),2),d=u[0],f=u[1],m=g((0,n.useState)(!1),2),p=m[0],h=m[1],v=g((0,n.useState)(null),2),j=v[0],w=v[1],k=(0,n.useRef)(null);(0,n.useEffect)((function(){if(window.paypal)S();else{var e={currency:"EUR",disablefunding:"card,giropay,sepa,sofort",locale:"it_IT"};t={url:"https://www.paypal.com/sdk/js?client-id=".concat("AZVz756sSn0AylZvDKjKGJnhJMGIw3JLV5crP_6igMFZhIOH00ReyNl4bo8GSKT7P0NkK5GEZUgULuin","&currency=").concat(e.currency,"&disable-funding=").concat(e.disablefunding,"&locale=").concat(e.locale),callback:function(){S()}},r=t.url,i=void 0===(n=t.attributes)?{}:n,o=t.callback,(a=document.createElement("script")).onerror=function(e){return console.error("An error occured while loading the PayPal JS SDK",e)},o&&(a.onload=o),Object.keys(i).forEach((function(e){a.setAttribute(e,i[e])})),document.body.appendChild(a),a.src=r}var t,r,n,i,o,a}),[]),(0,n.useEffect)((function(){S()}),[d]);var S=function(){var e;"cc"!==d&&"pp"===d&&window.paypal.Buttons({style:{color:"blue",shape:"pill",label:"paypal",tagline:!1},createOrder:function(e,r){return r.order.create({purchase_units:[{description:"Your Order!",amount:{currency_code:"EUR",value:t.live.subtotal.raw}}]})},onApprove:(e=b(regeneratorRuntime.mark((function e(n,o){var c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.order.capture();case 2:c=e.sent,s={line_items:t.live.line_items,customer:{firstname:r.firstName,lastname:r.lastName,email:r.email},shipping:{name:"Domestico",street:r.address1,town_city:r.city,county_state:r.region,postal_zip_code:r.zip,country:r.country},fulfillment:{shipping_method:r.shipping},payment:{gateway:"paypal",paypal:{action:"capture",payment_id:c.id,payer_id:c.payer.payer_id}}},console.log("order",c),console.log("orderData",s),console.log("checkoutToken",t),a(t.id,s),i();case 9:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)}),onError:function(e){w(e),console.error(e)}}).render(k.current)},O=function(){return(0,s.jsxs)("div",{className:"check-terms",children:[(0,s.jsx)("input",{type:"checkbox",name:"accept",onChange:function(e){return function(e){e.persist();var t=e.target.checked;h(!!t)}(e)},checked:p}),(0,s.jsxs)("label",{htmlFor:"accept",children:["Dichiaro di aver letto"," ",(0,s.jsx)("a",{href:"/terms-conditions",target:"_blank",rel:"noopener noreferrer",children:"Termini e Condizioni"})]})]})},_=function(){var e=b(regeneratorRuntime.mark((function e(n,o,c){var s,l,u,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c&&o){e.next=3;break}return e.abrupt("return");case 3:if(p){e.next=6;break}return alert("Accettare termini e condizioni prima di proseguire"),e.abrupt("return");case 6:return s=o.getElement(y.CardElement),e.next=9,c.createPaymentMethod({type:"card",card:s});case 9:l=e.sent,u=l.error,d=l.paymentMethod,u?console.log("[error]",u):(f={line_items:t.live.line_items,customer:{firstname:r.firstName,lastname:r.lastName,email:r.email},shipping:{name:"Domestico",street:r.address1,town_city:r.city,county_state:r.region,postal_zip_code:r.zip,country:r.country},fulfillment:{shipping_method:r.shipping},payment:{gateway:"stripe",stripe:{payment_method_id:d.id}}},a(t.id,f),i());case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),C=function(){var e=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a("test",{}),l(),i();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"checkout-form-box",children:[(0,s.jsx)("h3",{className:"",children:"Pagamento"}),(0,s.jsx)(x,{checkoutToken:t}),(0,s.jsx)("h5",{children:"Metodi di pagamento:"}),(0,s.jsxs)("select",{className:"payment-mode",onChange:function(e){console.log("e: ",e),console.log("e.target.value: ",e.target.value),f(e.target.value)},children:[(0,s.jsx)("option",{value:"cc",children:"Carta di credito"}),(0,s.jsx)("option",{value:"pp",children:"Paypal"}),(0,s.jsx)("option",{value:"test",children:"Test"})]}),"cc"===d&&(0,s.jsx)(y.Elements,{stripe:N,children:(0,s.jsx)(y.ElementsConsumer,{children:function(e){var r=e.elements,n=e.stripe;return(0,s.jsxs)("form",{onSubmit:function(e){return _(e,r,n)},children:[(0,s.jsx)(y.CardElement,{}),(0,s.jsx)(O,{}),(0,s.jsxs)("div",{className:"row2",children:[(0,s.jsx)(c.Z,{fn:o,text:"Torna indietro",type:"function",style:"inverted-btn"}),(0,s.jsxs)("button",{className:"btn inverted-btn",type:"submit",disabled:!n,children:["Conferma"," "+t.live.subtotal.formatted_with_symbol]})]})]})}})}),"pp"===d&&(0,s.jsxs)("div",{className:"paypal-comp",children:[j&&(0,s.jsxs)("div",{children:["Uh oh, an error occurred! ",j.message]}),(0,s.jsx)(O,{}),(0,s.jsx)("div",{className:"checkout-paypal-btn",ref:k}),(0,s.jsx)(c.Z,{fn:o,text:"Torna indietro",type:"function",style:"inverted-btn"})]}),"test"===d&&(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)(c.Z,{fn:o,text:"Torna indietro",type:"function",style:"inverted-btn"}),(0,s.jsx)(c.Z,{fn:C,text:"Conferma ".concat(t.live.subtotal.formatted_with_symbol),type:"function",style:"inverted-btn"})]})]})}var S=r(6022),O=r(136),_=r(3127);function C(e,t,r,n,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,i)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){C(o,n,i,a,c,"next",e)}function c(e){C(o,n,i,a,c,"throw",e)}a(void 0)}))}}function A(e){return function(t){return function(e,t,r){return T.apply(this,arguments)}(t,o.B.checkout.capture(e.checkoutTokenId,e.newOrder),_.Nx)}}function T(){return(T=E(regeneratorRuntime.mark((function e(t,r,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ðŸ‘®â€â™€ï¸ðŸ‘®â€â™‚ï¸ðŸ‘®â€â™€ï¸: ",n),e.prev=1,e.next=4,r;case 4:i=e.sent,console.log("ðŸ˜ŽðŸ˜‹ðŸ˜‹data in ".concat(n,": "),i),t({type:n,payload:i}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("err in ".concat(n," action: "),e.t0),t({type:_.yA,payload:{actionType:n,error:e.t0}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function P(e,t,r,n,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,i)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){P(o,n,i,a,c,"next",e)}function c(e){P(o,n,i,a,c,"throw",e)}a(void 0)}))}}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){c=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=function(e){return e.loadCart.cart},Z=function(e){return e.checkout.order},q=function(e){return e.checkout.error},M=["Shipping address","Payment details"];function V(){var e=(0,S.useSelector)(D,S.shallowEqual),t=(0,S.useSelector)(Z,S.shallowEqual),r=(0,S.useSelector)(q,S.shallowEqual);console.log("cart in Checkout.js: ",e);var a=R((0,n.useState)(0),2),l=a[0],u=a[1],d=R((0,n.useState)(null),2),f=d[0],m=d[1],p=R((0,n.useState)({}),2),h=p[0],y=p[1],x=(0,i.useHistory)(),j=R((0,n.useState)(!1),2),b=j[0],g=j[1];(0,n.useEffect)((function(){return E({type:_._r})}),[]);var w=function(){u((function(e){return e+1}))},N=function(){u((function(e){return e-1}))},C=function(e){y(e),w()},E=(0,S.useDispatch)(),T=function(){var e=I(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleCaptureCheckout activated! ðŸ¥¶ðŸ§¨ðŸŽ…"),E("test"===t?(0,O.UY)():A({checkoutTokenId:t,newOrder:r}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){return t&&E((0,O.qN)())}),[t]),(0,n.useEffect)((function(){0===l&&function(){var t=I(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.B.checkout.generateTokenFrom("cart",e.id);case 3:r=t.sent,console.log("token: ",r),m(r),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),l!==M.length&&x.push("/");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var P=function(){console.log("timeout activated!"),setTimeout((function(){g(!0)}),3e3)},z=function(){return(0,s.jsxs)("ul",{className:"progressbar",children:[(0,s.jsx)("li",{className:"active",children:"Indirizzo"}),(0,s.jsx)("li",{className:"".concat(l>0?"active":""),children:"Metodo di pagamento"})]})},V=function(){return 0===l?(0,s.jsx)(v,{checkoutToken:f,next:C}):(0,s.jsx)(k,{checkoutToken:f,shippingData:h,nextStep:w,backStep:N,onCaptureCheckout:T,timeout:P})},B=function(){return t?(0,s.jsxs)("div",{className:"confirmation-wrap",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{children:["Grazie per il tuo acquisto ",t.customer.firstname," ",t.customer.lastname,"!"]}),(0,s.jsxs)("p",{children:["Ordine: ",t.customer_reference]})]}),(0,s.jsx)(c.Z,{page:"/cart",text:"Torna al carrello",type:"internal",style:"inverted-btn"})]}):b?(0,s.jsxs)("div",{className:"confirmation-wrap",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("h3",{children:["Grazie per il tuo acquisto! ",h.firstName," ",h.lastName,"!"]})}),(0,s.jsx)("br",{}),(0,s.jsx)(c.Z,{page:"/",text:"Torna al sito",type:"internal",style:"inverted-btn"})]}):(0,s.jsx)("div",{className:"loader-inverted"})};return r&&(B=function(){return(0,s.jsxs)("div",{className:"confirmation-wrap",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"Errore:"}),(0,s.jsx)("p",{children:r.err.data.error.message})]}),(0,s.jsx)(c.Z,{page:"/cart",text:"Torna al carrello",type:"internal"})]})}),(0,s.jsx)("div",{id:"Checkout",children:(0,s.jsxs)("div",{className:"checkout-wrap",children:[(0,s.jsx)("div",{className:"checkout-title",children:(0,s.jsx)("h1",{children:"Checkout"})}),(0,s.jsx)("div",{className:"progressbar-wrap",children:(0,s.jsx)(z,{})}),l===M.length?(0,s.jsx)(B,{}):f?(0,s.jsx)(V,{}):(0,s.jsx)("div",{className:"loader-inverted"})]})})}},3998:e=>{e.exports={nameValidation:function(e,t){return""===t.trim()?"Il ".concat(e," Ã¨ richiesto"):/[^a-zA-Z -]/.test(t)?"Caratteri non consentiti":t.trim().length<3?"Il ".concat(e," deve contenere almeno 3 lettere"):null},emailValidation:function(e){return/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)?null:""===e.trim()?"Ãˆ richiesta un'email":"Perfavore inserisci un'email valida"},requestedValue:function(e){return""===e.trim()?"Devi inserire qualcosa":null},textValidation:function(e){return""===e.trim()?"Devi scriverci qualcosa":null},numberValidation:function(e,t){return""===t.trim()?"Il ".concat(e," Ã¨ richiesto"):/^\d+$/.test(t)?null:"".concat(e," deve essere un numero")}}}};